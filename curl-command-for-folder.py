import os
import requests

# Set the directory containing the files
directory_path = '/Users/skpaul/mac-tamu/malware-dataset/attack/white-box-attack-submission/dropped'

# URL to which the files will be posted
url = 'http://127.0.0.1:8080/'

# Iterate over each file in the directory
for filename in os.listdir(directory_path):
    # Construct full file path
    file_path = os.path.join(directory_path, filename)
    # Check if it's a file
    if os.path.isfile(file_path):
        # Open the file in binary mode
        with open(file_path, 'rb') as file:
            # Prepare headers
            headers = {'Content-Type': 'application/octet-stream'}
            # Post the file
            response = requests.post(url, headers=headers, data=file)
            # Print the status code and response body
            print(f'File: {filename}, Status Code: {response.status_code}, Response: {response.text}')