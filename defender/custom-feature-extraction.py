import numpy as np
from customfeatures import PEFeatureExtractor

extractor = PEFeatureExtractor(feature_version=2)

features = np.empty((0, 638))
pe_file_paths = ["/Users/skpaul/mac-tamu/malware-project/malware-sample/7z2401-x64.exe", "/Users/skpaul/mac-tamu/malware-project/malware-sample/77ed461936508b99338a5f7bf93ce4e014eb121ecfa75378b09a307528f3be05.exe"]

for pe_file_path in pe_file_paths:
    putty_data = open(pe_file_path, "rb").read()
    #features = extractor.raw_features(putty_data)
    features_for_one_pe_file = np.array(extractor.feature_vector(putty_data), dtype=np.float32)
    print(features_for_one_pe_file.shape)
    #features = np.transpose(features_for_one_pe_file)
    #features = features[:-4]
    features = np.vstack((features, features_for_one_pe_file))
    print(features.shape)
    
print(features.shape)